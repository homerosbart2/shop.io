{"ast":null,"code":"import _objectSpread from\"/Users/hcampos/Documents/REACT/shop.io/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/hcampos/Documents/REACT/shop.io/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import{Button,BUTTON_COLOR}from'../button/button';import{EMAIL_REGEX}from'../../util/regex';import'./login.scss';import{useStore}from'../../stores';import{observer}from'mobx-react';var MODE;(function(MODE){MODE[MODE[\"LOGIN\"]=0]=\"LOGIN\";MODE[MODE[\"REGISTRATION\"]=1]=\"REGISTRATION\";})(MODE||(MODE={}));var DEFAULT_USER={name:'',email:''};export var Login=observer(function(props){var store=useStore();var user=store.userStore.user;var _useState=useState(DEFAULT_USER),_useState2=_slicedToArray(_useState,2),edittedUser=_useState2[0],setEdittedUser=_useState2[1];var _useState3=useState(MODE.LOGIN),_useState4=_slicedToArray(_useState3,2),mode=_useState4[0],setMode=_useState4[1];var onSignIn=props.onSignIn;useEffect(function(){if(!user){var loggedInUserEmail=localStorage.getItem('loggedInUserEmail');if(loggedInUserEmail){onSignIn({email:loggedInUserEmail},false);}}},[onSignIn,user]);var handleUserNameChange=function handleUserNameChange(event){setEdittedUser(function(user){return _objectSpread(_objectSpread({},user),{},{name:event.target.value});});};var handleUserEmailChange=function handleUserEmailChange(event){setEdittedUser(function(user){return _objectSpread(_objectSpread({},user),{},{email:event.target.value});});};var handleRegisterButtonClick=function handleRegisterButtonClick(){setMode(function(loginMode){return loginMode===MODE.REGISTRATION?MODE.LOGIN:MODE.REGISTRATION;});};var handleAcceptButtonClick=function handleAcceptButtonClick(){if(edittedUser.email.match(EMAIL_REGEX)){if(mode===MODE.REGISTRATION){if(edittedUser.name){props.onSignIn(edittedUser,true);}else{props.onFail('Please insert your name.');}}else{props.onSignIn({email:edittedUser.email},false);}}else{props.onFail('Incorrect email format.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login \".concat(props.loggedIn?'':'shown'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"brand\",children:[\"shop\",/*#__PURE__*/_jsx(\"span\",{className:\"secondary\",children:\".io\"})]}),/*#__PURE__*/_jsx(\"input\",{className:\"user-name-input \".concat(mode===MODE.LOGIN?'':'shown'),type:\"text\",name:\"name\",value:edittedUser.name,placeholder:\"Name: John Wick\",onChange:handleUserNameChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",value:edittedUser.email,placeholder:\"Email: myname@email.com\",onChange:handleUserEmailChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(Button,{color:BUTTON_COLOR.ORANGE,onClick:handleRegisterButtonClick,children:mode===MODE.REGISTRATION?'Sign In':'Sign Up'}),/*#__PURE__*/_jsx(Button,{color:BUTTON_COLOR.GREEN,onClick:handleAcceptButtonClick,children:\"Accept\"})]})]});});","map":{"version":3,"sources":["/Users/hcampos/Documents/REACT/shop.io/frontend/src/components/login/login.tsx"],"names":["React","useEffect","useState","Button","BUTTON_COLOR","EMAIL_REGEX","useStore","observer","MODE","DEFAULT_USER","name","email","Login","props","store","user","userStore","edittedUser","setEdittedUser","LOGIN","mode","setMode","onSignIn","loggedInUserEmail","localStorage","getItem","handleUserNameChange","event","target","value","handleUserEmailChange","handleRegisterButtonClick","loginMode","REGISTRATION","handleAcceptButtonClick","match","onFail","loggedIn","ORANGE","GREEN"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { User } from '../../types/user';\nimport { Button, BUTTON_COLOR } from '../button/button';\nimport { EMAIL_REGEX } from '../../util/regex';\n\nimport './login.scss';\nimport { useStore } from '../../stores';\nimport { observer } from 'mobx-react';\n\ninterface LoginProps {\n    loggedIn: boolean;\n    onSignIn: (user: Partial<User> & Pick<User, 'email'>, isNew: boolean) => void;\n    onFail: (message: string) => void;\n}\n\nenum MODE {\n    LOGIN,\n    REGISTRATION,\n}\n\nconst DEFAULT_USER: User = {\n    name: '',\n    email: '',\n}\n\nexport const Login = observer((props: LoginProps) => {\n    const store = useStore();\n    const user = store.userStore.user;\n\n    const [edittedUser, setEdittedUser] = useState<User>(DEFAULT_USER);\n    const [mode, setMode] = useState<MODE>(MODE.LOGIN);\n    \n    const { onSignIn } = props;\n    useEffect(\n        () => {\n            if (!user) {\n                const loggedInUserEmail = localStorage.getItem('loggedInUserEmail');\n                if (loggedInUserEmail) {\n                    onSignIn({ email: loggedInUserEmail }, false);\n                }\n            }\n        },\n        [onSignIn, user],\n    );\n\n    const handleUserNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setEdittedUser(user => ({ ...user, name: event.target.value }));\n    };\n\n    const handleUserEmailChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setEdittedUser(user => ({ ...user, email: event.target.value }));\n    };\n\n    const handleRegisterButtonClick = () => {\n        setMode(loginMode => loginMode === MODE.REGISTRATION ? MODE.LOGIN : MODE.REGISTRATION);\n    };\n\n    const handleAcceptButtonClick = () => {\n        if (edittedUser.email.match(EMAIL_REGEX)) {\n            if (mode === MODE.REGISTRATION) {\n                if (edittedUser.name) {\n                    props.onSignIn(edittedUser, true);\n                } else {\n                    props.onFail('Please insert your name.');\n                }\n            } else {\n                props.onSignIn({ email: edittedUser.email }, false);\n            }\n        } else {\n            props.onFail('Incorrect email format.');\n        }\n    };\n\n    return (\n        <div className={`login ${props.loggedIn ? '' : 'shown'}`}>\n            <div className=\"brand\">\n                shop<span className=\"secondary\">.io</span>\n            </div>\n            <input\n                className={`user-name-input ${mode === MODE.LOGIN ? '' : 'shown'}`}\n                type=\"text\"\n                name=\"name\"\n                value={edittedUser.name}\n                placeholder=\"Name: John Wick\"\n                onChange={handleUserNameChange}\n            />\n            <input\n                type=\"text\"\n                name=\"email\"\n                value={edittedUser.email}\n                placeholder=\"Email: myname@email.com\"\n                onChange={handleUserEmailChange}\n            />\n            <div className=\"buttons\">\n                <Button\n                    color={BUTTON_COLOR.ORANGE}\n                    onClick={handleRegisterButtonClick}\n                >\n                    {mode === MODE.REGISTRATION ? 'Sign In' : 'Sign Up'}\n                </Button>\n                <Button\n                    color={BUTTON_COLOR.GREEN}\n                    onClick={handleAcceptButtonClick}\n                >\n                    Accept\n                </Button>\n            </div>\n        </div>\n    );\n});"]},"metadata":{},"sourceType":"module"}