{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/hcampos/Documents/REACT/shop.io/frontend/src/stripe/checkout-form.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport { useStore } from '../stores';\nimport { Button, BUTTON_COLOR } from '../components/button/button';\nimport { LoadingSpinner } from '../components/loading-spinner/loading-spinner';\nimport './checkout-form.scss';\nexport const CheckoutForm = props => {\n  _s();\n\n  const store = useStore();\n  const [complete, setComplete] = useState(false);\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    if (stripe && elements) {\n      const {\n        error,\n        paymentMethod\n      } = await stripe.createPaymentMethod({\n        type: \"card\",\n        card: elements.getElement(CardElement)\n      });\n\n      if (!error) {\n        if (paymentMethod) {\n          if (await store.orderStore.pay(paymentMethod.id, props.amount)) {\n            props.onPaySuccess();\n          }\n        }\n      } else {\n        console.log(error.message);\n      }\n    }\n  };\n\n  const handleChange = ({\n    complete\n  }) => {\n    setComplete(complete);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `checkout-form ${props.shown ? 'shown' : ''}`,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(CardElement, {\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          color: BUTTON_COLOR.ORANGE,\n          onClick: props.onCancelButtonClick,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: complete ? '' : 'disabled',\n          children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 68\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CheckoutForm, \"moiHljwzna0uMpHoZA9PXSUOVng=\", false, function () {\n  return [useStore, useStripe, useElements];\n});\n\n_c = CheckoutForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutForm\");","map":{"version":3,"sources":["/Users/hcampos/Documents/REACT/shop.io/frontend/src/stripe/checkout-form.tsx"],"names":["React","useState","CardElement","useStripe","useElements","useStore","Button","BUTTON_COLOR","LoadingSpinner","CheckoutForm","props","store","complete","setComplete","stripe","elements","handleSubmit","event","preventDefault","error","paymentMethod","createPaymentMethod","type","card","getElement","orderStore","pay","id","amount","onPaySuccess","console","log","message","handleChange","shown","ORANGE","onCancelButtonClick"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,WAAjC,QAAoD,yBAApD;AACA,SAASC,QAAT,QAAyB,WAAzB;AACA,SAASC,MAAT,EAAiBC,YAAjB,QAAqC,6BAArC;AACA,SAASC,cAAT,QAA+B,+CAA/B;AAEA,OAAO,sBAAP;AAUA,OAAO,MAAMC,YAAY,GAAIC,KAAD,IAA8B;AAAA;;AACtD,QAAMC,KAAK,GAAGN,QAAQ,EAAtB;AACA,QAAM,CAACO,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,CAAU,KAAV,CAAxC;AAEA,QAAMa,MAAM,GAAGX,SAAS,EAAxB;AACA,QAAMY,QAAQ,GAAGX,WAAW,EAA5B;;AAEA,QAAMY,YAAY,GAAG,MAAOC,KAAP,IAAmD;AACpEA,IAAAA,KAAK,CAACC,cAAN;;AACA,QAAIJ,MAAM,IAAIC,QAAd,EAAwB;AACpB,YAAM;AAAEI,QAAAA,KAAF;AAASC,QAAAA;AAAT,UAA2B,MAAMN,MAAM,CAACO,mBAAP,CAA2B;AAC9DC,QAAAA,IAAI,EAAE,MADwD;AAE9DC,QAAAA,IAAI,EAAER,QAAQ,CAACS,UAAT,CAAoBtB,WAApB;AAFwD,OAA3B,CAAvC;;AAKA,UAAI,CAACiB,KAAL,EAAY;AACR,YAAIC,aAAJ,EAAmB;AACf,cAAI,MAAMT,KAAK,CAACc,UAAN,CAAiBC,GAAjB,CAAqBN,aAAa,CAACO,EAAnC,EAAuCjB,KAAK,CAACkB,MAA7C,CAAV,EAAgE;AAC5DlB,YAAAA,KAAK,CAACmB,YAAN;AACH;AACJ;AACJ,OAND,MAMO;AACHC,QAAAA,OAAO,CAACC,GAAR,CAAYZ,KAAK,CAACa,OAAlB;AACH;AACJ;AACJ,GAlBD;;AAoBA,QAAMC,YAAY,GAAG,CAAC;AAAErB,IAAAA;AAAF,GAAD,KAAgD;AACjEC,IAAAA,WAAW,CAACD,QAAD,CAAX;AACH,GAFD;;AAIA,sBACI;AAAK,IAAA,SAAS,EAAG,iBAAgBF,KAAK,CAACwB,KAAN,GAAc,OAAd,GAAwB,EAAG,EAA5D;AAAA,2BACI;AAAM,MAAA,QAAQ,EAAElB,YAAhB;AAAA,8BACI,QAAC,WAAD;AAAa,QAAA,QAAQ,EAAEiB;AAAvB;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA,gCACI,QAAC,MAAD;AAAQ,UAAA,KAAK,EAAE1B,YAAY,CAAC4B,MAA5B;AAAoC,UAAA,OAAO,EAAEzB,KAAK,CAAC0B,mBAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AAAQ,UAAA,SAAS,EAAExB,QAAQ,GAAG,EAAH,GAAQ,UAAnC;AAAA,iCAA+C,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAA/C;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAaH,CA5CM;;GAAMH,Y;UACKJ,Q,EAGCF,S,EACEC,W;;;KALRK,Y","sourcesContent":["import React, { useState } from 'react';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport { useStore } from '../stores';\nimport { Button, BUTTON_COLOR } from '../components/button/button';\nimport { LoadingSpinner } from '../components/loading-spinner/loading-spinner';\n\nimport './checkout-form.scss';\nimport { StripeCardElementChangeEvent } from '@stripe/stripe-js';\n\ninterface CheckoutFormProps {\n    amount: number;\n    shown: boolean;\n    onCancelButtonClick: () => void;\n    onPaySuccess: () => void;\n}\n\nexport const CheckoutForm = (props: CheckoutFormProps) => {\n    const store = useStore();\n    const [complete, setComplete] = useState<boolean>(false);\n\n    const stripe = useStripe();\n    const elements = useElements();\n\n    const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        if (stripe && elements) {\n            const { error, paymentMethod } = await stripe.createPaymentMethod({\n                type: \"card\",\n                card: elements.getElement(CardElement)!,\n            });\n    \n            if (!error) {\n                if (paymentMethod) {\n                    if (await store.orderStore.pay(paymentMethod.id, props.amount)) {\n                        props.onPaySuccess();\n                    }\n                }\n            } else {\n                console.log(error.message);\n            }\n        }\n    };\n\n    const handleChange = ({ complete }: StripeCardElementChangeEvent) => {\n        setComplete(complete);\n    };\n\n    return (\n        <div className={`checkout-form ${props.shown ? 'shown' : ''}`}>\n            <form onSubmit={handleSubmit}>\n                <CardElement onChange={handleChange}/>\n                <div className=\"buttons\">\n                    <Button color={BUTTON_COLOR.ORANGE} onClick={props.onCancelButtonClick}>\n                        Cancel\n                    </Button>\n                    <button className={complete ? '' : 'disabled'}><LoadingSpinner/></button>\n                </div>\n            </form>\n        </div>\n    );\n};"]},"metadata":{},"sourceType":"module"}