{"ast":null,"code":"import _defineProperty from\"/Users/hcampos/Documents/REACT/shop.io/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/hcampos/Documents/REACT/shop.io/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/hcampos/Documents/REACT/shop.io/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hcampos/Documents/REACT/shop.io/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/hcampos/Documents/REACT/shop.io/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hcampos/Documents/REACT/shop.io/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import{makeAutoObservable,runInAction}from'mobx';import{getApi}from'../util/http';export var ProductStore=/*#__PURE__*/function(){function ProductStore(){var _this=this;_classCallCheck(this,ProductStore);this.products=[];this.isIndexing=false;this.index=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.isIndexing=true;_context.next=3;return getApi(_this.path);case 3:response=_context.sent;runInAction(function(){if(response.successful&&response.data){_this.products=response.data;}});_this.isIndexing=false;return _context.abrupt(\"return\",response.successful);case 7:case\"end\":return _context.stop();}}},_callee);}));makeAutoObservable(this);}_createClass(ProductStore,[{key:\"mappedProducts\",get:function get(){return this.products.reduce(function(mappedProducts,product){return _objectSpread(_objectSpread({},mappedProducts),{},_defineProperty({},product.id,product));},{});}},{key:\"path\",get:function get(){return'product';}}]);return ProductStore;}();","map":{"version":3,"sources":["/Users/hcampos/Documents/REACT/shop.io/frontend/src/stores/product-store.ts"],"names":["makeAutoObservable","runInAction","getApi","ProductStore","products","isIndexing","index","path","response","successful","data","reduce","mappedProducts","product","id"],"mappings":"g+BAAA,OAASA,kBAAT,CAA6BC,WAA7B,KAAgD,MAAhD,CAEA,OAASC,MAAT,KAAuB,cAAvB,CAGA,UAAaC,CAAAA,YAAb,yBAII,uBAAc,wDAHdC,QAGc,CAHQ,EAGR,MAFdC,UAEc,CAFD,KAEC,MAkBdC,KAlBc,sEAkBN,gJACJ,KAAI,CAACD,UAAL,CAAkB,IAAlB,CADI,sBAGmBH,CAAAA,MAAM,CAAY,KAAI,CAACK,IAAjB,CAHzB,QAGEC,QAHF,eAIJP,WAAW,CAAC,UAAM,CACd,GAAIO,QAAQ,CAACC,UAAT,EAAuBD,QAAQ,CAACE,IAApC,CAA0C,CACtC,KAAI,CAACN,QAAL,CAAgBI,QAAQ,CAACE,IAAzB,CACH,CACJ,CAJU,CAAX,CAMA,KAAI,CAACL,UAAL,CAAkB,KAAlB,CAVI,gCAYGG,QAAQ,CAACC,UAZZ,wDAlBM,GACVT,kBAAkB,CAAC,IAAD,CAAlB,CACH,CANL,mEAQyB,CACjB,MAAO,MAAKI,QAAL,CAAcO,MAAd,CACH,SAACC,cAAD,CAAiBC,OAAjB,wCACOD,cADP,wBAEKC,OAAO,CAACC,EAFb,CAEkBD,OAFlB,IADG,CAKH,EALG,CAAP,CAOH,CAhBL,gCAkBe,CACP,MAAO,SAAP,CACH,CApBL","sourcesContent":["import { makeAutoObservable, runInAction } from 'mobx';\nimport type { Product } from '../types/product';\nimport { getApi } from '../util/http';\nimport type { Mapped } from '../types/mapped';\n\nexport class ProductStore {\n    products: Product[] = [];\n    isIndexing = false;\n    \n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    get mappedProducts() {\n        return this.products.reduce(\n            (mappedProducts, product) => ({\n                ...mappedProducts,\n                [product.id]: product,\n            }),\n            {} as Mapped<Product>,\n        );\n    }\n\n    get path() {\n        return 'product';\n    }\n\n    index = async () => {\n        this.isIndexing = true;\n\n        const response = await getApi<Product[]>(this.path);\n        runInAction(() => {\n            if (response.successful && response.data) {\n                this.products = response.data;\n            }\n        });\n\n        this.isIndexing = false;\n        \n        return response.successful;\n    }\n}"]},"metadata":{},"sourceType":"module"}